{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "http://openbanking.org.uk/testcase.schema.json",
    "title": "TestCase",
    "description": "A Test Case",
    "type": "object",
    "properties": {
      "name": {
        "description": "The descriptive name of this test case",
        "type": "string"
      },
      "input": {
          "type":"object"
          
      },
      "context": {
        "type":"object"
      },
      "expect":{
          "type":"object",
          "status-code": {
            "type": "string"
          },
          "schema-validation": {
            "type":"boolean"
          },
          "matches": {
            "type": "array",
            "items":{
              "$ref": "#/definitions/match"
            }
          }          
      }
    },
    "required": [ "name", "input", "expect" ],
    "definitions": {
      "match": {        
        "type":"object",
        "properties":{
          "description": {
            "type":"string"
          },
          "regex":{
            "type":"string"
          },
          "header":{
            "type":"string"
          },
          "value":{
            "type":"string"
          },
          "header-exists":{
            "type":"string"
          },
          "count": {
            "type":"number"
          },
          "json": {
            "type":"string"
          }
        },
        "required":["description"]
      }
    }
  }