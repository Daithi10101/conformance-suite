{
	"scripts": [
        {
			"description": "Domestic Payment consents succeeds with minimal data set with additional schema checks.",
            "id": "OB-301-DOP-206111",
            "refURI": "https://openbanking.atlassian.net/wiki/spaces/DZ/pages/937984109/Domestic+Payments+v3.1#DomesticPaymentsv3.1-POST/domestic-payment-consents",
            "detail" : "Checks that the resource succeeds posting a domestic payment consents with a minimal data set and checks additional schema.",
			"parameters": {
                "tokenRequestScope": "payments",
                "paymentType": "domestic-payment-consents",
                "body": {
                    "Data": {
                      "Initiation": {
                        "InstructionIdentification": "Excaliber",
                        "EndToEndIdentification": "Excaliber",
                        "InstructedAmount": {
                          "Amount": "10.00",
                          "Currency": "GBP"
                        },
                        "CreditorAccount": {
                          "SchemeName": "SortCodeAccountNumber",
                          "Identification": "20202010981789",
                          "Name": "Dr Foo"
                        }
                      }
                    },
                    "Risk": {}
                  }     
            },
            "uri": "domestic-payment-consents",
            "uriImplementation": "mandatory",
            "resource": "DomesticPayment",
            "asserts": ["OB3DOPAssertOnSuccess", "OB3GLOAAssertConsentId"],
            "keepContext": ["OB3GLOAAssertConsentId"],
            "method":"post",
            "schemaCheck": true
        },
        {
			"description": "Domestic Payment consents fails when given an invalid ConsentId",
            "id": "OB-301-DOP-311740",
            "refURI": "https://openbanking.atlassian.net/wiki/spaces/DZ/pages/937984109/Domestic+Payments+v3.1#DomesticPaymentsv3.1-POST/domestic-payment-consents",
            "detail" : "Checks that the resource correctly fails posting an invalid domestic payment consent.",
			"parameters": {
                "tokenRequestScope": "payments",
                "paymentType": "domestic-payment-consents",
                "ConsentId": "$consentId",
                "body": {
                    "Data": {
                      "Initiation": {
                        "InstructionIdentification": "Excaliber",
                        "EndToEndIdentification": "Excaliber",
                        "InstructedAmount": {
                          "Amount": "10.00",
                          "Currency": "GBP"
                        },
                        "CreditorAccount": {
                          "SchemeName": "SortCodeAccountNumber",
                          "Identification": "20202010981789",
                          "Name": "Dr Foo"
                        }
                      }
                    },
                    "Risk": {}
                  }     
            },
            "uri": "domestic-payment-consents/$consentId",
            "uriImplementation": "mandatory",
            "resource": "DomesticPayment",
            "asserts": ["OB3GLOAssertOn400"],
            "method":"post",
            "schemaCheck": true
        }

	]
}